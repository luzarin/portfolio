<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap 5.3 (unified with index) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    crossorigin="anonymous">
  <!-- link to style sheet -->
  <link rel="stylesheet" href="../style.css">
  <!-- LINK TO PROJECT PAGE STYLE SHEET -->
  <link rel="stylesheet" href="../pag_proyecto.css">
  <!-- GOOGLE fonts: Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
  <title>Proyecto 3</title>
</head>

<body>
  <nav class="nav">
    <div class="container">
      <div class="logo">
        <a href="../index.html">Inicio</a>
      </div>
      <div id="mainListDiv" class="main_list">
        <ul class="navlinks">
          <li><a href="Lucas-Blachet-DelSolar-CV.pdf">CV</a></li>
          <li><a href="http://www.linkedin.com/in/lucas-blachet/">LinkedIn</a></li>
          <li><a href="https://github.com/luzarin">GitHub</a></li>
        </ul>
      </div>
      <button id="mobileMenuButton" class="mobile-menu-btn" aria-label="Abrir men√∫">‚ò∞</button>
      <div id="mobileMenu" class="mobile-menu" style="display:none;">
        <ul>
          <li><a href="Lucas-Blachet-DelSolar-CV.pdf">CV</a></li>
          <li><a href="http://www.linkedin.com/in/lucas-blachet/">LinkedIn</a></li>
          <li><a href="https://github.com/luzarin">GitHub</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Container for the image gallery -->
  <div class="imageContainer-large">

    <div class="imageContainer">
      <!-- Next and previous buttons
     <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
     <a class="next" onclick="plusSlides(1)">&#10095;</a> -->
      <!-- Full-width images with number text -->
      <div class="mySlides">
        <img class="myImg" src="../imagenes/proyecto3-1.png" style="width:100%">
      </div>
      <!-- The Modal -->
      <div id="myModal" class="modal">

        <!-- The Close Button -->
        <span class="close">&times;</span>

        <!-- Modal Content (The Image) -->
        <img class="modal-content" id="img01">
      </div>

      <div class="mySlides">
        <img class="myImg" src="../imagenes/proyecto3-2.png" style="width:100%">
      </div>

      <div class="mySlides">
        <img class="myImg" src="../imagenes/proyecto3-3.png" style="width:100%">
      </div>

      <div class="mySlides">
        <img class="myImg" src="../imagenes/proyecto3-4.png" style="width:100%">
      </div>

      <!-- Image text -->
      <div class="caption-container">
        <p id="caption"></p>
      </div>

      <!-- Thumbnail images -->
      <div class="images">
        <div class="row">
          <div class="column">
            <img class="demo cursor" src="../imagenes/proyecto3-1.png" style="width:100%" onclick="currentSlide(1)"
              alt="Herramienta en QGIS.">
          </div>
          <div class="column">
            <img class="demo cursor" src="../imagenes/proyecto3-2.png" style="width:100%" onclick="currentSlide(2)"
              alt="Archivos .tif de celdas DTM+buildings corregidas.">
          </div>
          <div class="column">
            <img class="demo cursor" src="../imagenes/proyecto3-3.png" style="width:100%" onclick="currentSlide(3)"
              alt="R√°ster virtual del DTM+buildings final.">
          </div>
          <div class="column">
            <img class="demo cursor" src="../imagenes/proyecto3-4.png" style="width:100%" onclick="currentSlide(4)"
              alt="Producto resultante del R√°ster virtual (Renderizado en Blender).">
          </div>
        </div>
      </div>

    </div>

    <p class="card-text project-text"><span class="coll projdes">Resumen del Proyecto</span><br><span
        class="indent">Proyecto dise√±ado para automatizar un flujo de trabajo LiDAR completo orientado a generar Modelos
        Digitales del Terreno (DTM) que incluyan edificaciones, a partir de archivos LAZ/LAS clasificados. Consta de dos
        implementaciones:</span>
      <br>
      <span class="indent">
        <br>
        <strong>1. dtmbuildings-qgis.py:</strong> pensado como script de procesamiento dentro de QGIS (Processing
        Toolbox), para ejecutarlo como herramienta.
        <br>
        <strong>2. dtmbuildings.py:</strong> versi√≥n standalone en Python puro, mismo flujo fuera de QGIS, ideal para
        batch.
      </span>
      <br><br>
      <span class="indent">
        El pipeline ejecuta una secuencia fija de procesamiento LiDAR. Primero filtra los puntos de suelo (clase 2) y
        edificaciones (clase 6) con PDAL, luego fusiona ambas clasificaciones en un √∫nico archivo para conservar las
        elevaciones estructurales. Despu√©s rasteriza el conjunto combinado mediante writers.gdal, generando un
        DTM+edificaciones con resoluci√≥n configurable (por ejemplo, 0.5 m) y compresi√≥n optimizada. Finalmente aplica
        gdal_fillnodata para rellenar huecos y obtener superficies continuas. Produce rasters finales coherentes, sin
        NoData, listos para an√°lisis o para construcci√≥n de r√°sters.
      </span>
      <br><br>
      <span class="coll projdes">M√°s Informaci√≥n</span>
      <br><br>
      </a>
      <a href="https://github.com/luzarin/DTM-y-edificaciones">
        <span class="logos">üîó GitHub</span>
      </a>
    </p>
  </div>

  <!-- JAVASCRIPT FOR SLIDESHOW -->
  <script>
    let slideIndex = 1;
    let slides = [];
    let dots = [];
    let captionText = null;
    let modal = null;
    let modalImg = null;
    let closeBtn = null;
    let isModalOpen = false;
    let zoomLevel = 1;

    function showSlides(n) {
      if (!slides.length) return;
      if (n > slides.length) { slideIndex = 1; }
      if (n < 1) { slideIndex = slides.length; }

      for (let i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";
      }
      for (let i = 0; i < dots.length; i++) {
        dots[i].className = dots[i].className.replace(" active", "");
      }

      slides[slideIndex - 1].style.display = "block";
      if (dots[slideIndex - 1]) {
        dots[slideIndex - 1].className += " active";
        if (captionText) {
          captionText.innerHTML = dots[slideIndex - 1].alt || "";
        }
      }

      if (isModalOpen) {
        const currentImage = slides[slideIndex - 1].querySelector('.myImg');
        if (currentImage) {
          modalImg.src = currentImage.src;
          resetZoom();
        }
      }
    }

    function plusSlides(n) {
      showSlides(slideIndex += n);
    }

    function currentSlide(n) {
      showSlides(slideIndex = n);
    }

    function applyZoomTransform() {
      if (modalImg) {
        modalImg.style.transform = 'translate(-50%, -50%) scale(' + zoomLevel + ')';
      }
    }

    function resetZoom() {
      zoomLevel = 1;
      applyZoomTransform();
    }

    function openModalWithCurrentSlide() {
      if (!modal || !modalImg) return;
      const currentImage = slides[slideIndex - 1]?.querySelector('.myImg');
      if (!currentImage) return;
      modal.style.display = "block";
      isModalOpen = true;
      modalImg.src = currentImage.src;
      resetZoom();
    }

    function closeModal() {
      if (!modal) return;
      modal.style.display = "none";
      isModalOpen = false;
      resetZoom();
    }

    function initGalleryInteractions() {
      slides = Array.from(document.getElementsByClassName("mySlides"));
      dots = Array.from(document.getElementsByClassName("demo"));
      captionText = document.getElementById("caption");
      modal = document.getElementById('myModal');
      modalImg = document.getElementById('img01');
      closeBtn = document.querySelector('.close');

      slides.forEach(function (slide, idx) {
        const img = slide.querySelector('.myImg');
        if (img) {
          img.style.cursor = 'pointer';
          img.addEventListener('click', function () {
            slideIndex = idx + 1;
            showSlides(slideIndex);
            openModalWithCurrentSlide();
          });
        }
      });

      if (closeBtn) {
        closeBtn.addEventListener('click', closeModal);
      }

      if (modal) {
        modal.addEventListener('click', function (event) {
          if (event.target === modal) {
            closeModal();
          }
        });
      }

      if (modalImg) {
        modalImg.style.transformOrigin = 'center center';
        applyZoomTransform();
        modalImg.addEventListener('wheel', function (event) {
          if (!isModalOpen) return;
          event.preventDefault();
          const direction = event.deltaY < 0 ? 1 : -1;
          const step = 0.15;
          zoomLevel = Math.min(4, Math.max(1, zoomLevel + direction * step));
          applyZoomTransform();
        }, { passive: false });
      }

      document.addEventListener('keydown', function (event) {
        if (event.key === 'Escape' || event.key === 'Esc') {
          closeModal();
        } else if (event.key === 'ArrowRight') {
          plusSlides(1);
        } else if (event.key === 'ArrowLeft') {
          plusSlides(-1);
        }
      });

      showSlides(slideIndex);
    }

    document.addEventListener('DOMContentLoaded', initGalleryInteractions);
  </script>

  <!-- Bootstrap 5.3 bundle (unificado) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>
  <!-- Font awesome -->
  <script src="https://kit.fontawesome.com/8edb919db8.js" crossorigin="anonymous"></script>
  <!-- Script to enable mobile menu on project pages -->
  <script src="../pag_proyecto.js" defer="defer"></script>

  <!-- Footer -->
  <footer style="background-color: #111111; padding: 20px 0; text-align: center; margin-top: 40px;">
    <p style="margin: 0; color: #ffffff; font-size: 0.95em;">
      Creado por Lucas Blachet Del Solar | Email: lucas.blachet@uc.cl
    </p>
  </footer>
</body>

</html>